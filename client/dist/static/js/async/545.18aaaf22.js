"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([["545"],{46173:function(e,l,i){i.d(l,{L:()=>m,c:()=>h});var t=i(32909),n=i(42642),s=i(62540),r=i(63696),a=i(27800),o=i(98259),d=i(71284);i(81592);var c=i(73470),u=i(97773),p=i(30111);let m=r.createContext({}),h=e=>{var l;let{children:i}=e,[h,b]=r.useState(""),[x]=(0,a.Q3)(h,400),{labels:_}=(0,p._P)(x),[j,y]=r.useState(""),[g]=(0,a.Q3)(j,400),{result:{data:f}}=(0,u.K)({filters:[{field:o._G,operator:"~",value:g}],sort:{field:"license",direction:"asc"},page:{pageNumber:1,itemsPerPage:10}}),v=(0,c.MM)({tableName:"sbom",persistenceKeyPrefix:o.rt.sboms,persistTo:"urlParams",columnNames:{name:"Name",version:"Version",supplier:"Supplier",labels:"Labels",published:"Created on",packages:"Dependencies",vulnerabilities:"Vulnerabilities"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["name","published"],isFilterEnabled:!0,filterCategories:[{categoryKey:o._G,title:"Filter text",placeholderText:"Search",type:"search"},{categoryKey:"published",title:"Created on",type:"dateRange"},{categoryKey:"labels",title:"Label",type:"autocompleteLabel",placeholderText:"Filter results by label",selectOptions:_.map(e=>{let l=(0,d.m4)({key:e.key,value:e.value});return{value:l,label:l}}),onInputValueChange:b},{categoryKey:"license",title:"License",type:"asyncMultiselect",placeholderText:"Filter results by license",selectOptions:f.map(e=>({value:e.license,label:e.license})),onInputValueChange:y}],isExpansionEnabled:!1}),{result:{data:C,total:T},isFetching:K,fetchError:k}=(0,p.i$)((0,c.Ng)((0,n._)((0,t._)({},v),{hubSortFieldKeys:{name:"name",published:"published"}})),(null!=(l=v.filterState.filterValues.labels)?l:[]).map(e=>(0,d.Cb)(e))),S=(0,c.PB)((0,n._)((0,t._)({},v),{idProperty:"id",currentPageItems:C,totalItemCount:T,isLoading:K}));return(0,s.jsx)(m.Provider,{value:{totalItemCount:T,isFetching:K,fetchError:k,tableControls:S},children:i})}},74466:function(e,l,i){i.d(l,{Y:()=>V});var t=i(32909),n=i(42642),s=i(62540),r=i(63696),a=i(74343),o=i(38927),d=i(80057),c=i(13021),u=i(24773),p=i(26917),m=i(16646),h=i(21758),b=i(40384),x=i(28516),_=i(78517),j=i(62101),y=i(71284),g=i(89705),f=i(12852),v=i(4392),C=i(93826),T=i(30448),K=i(98259),k=i(99528),S=i(30111),P=i(52362),w=i(23909),E=i(98345),L=i(6160),D=i(24296),F=i(92107),I=i(15461),B=i(3652);let N=e=>{let{sbomId:l}=e,{data:i,isFetching:t,fetchError:n}=(0,B.UI)(l);return(0,s.jsx)(D.a,{isFetching:t,fetchError:n,isFetchingState:(0,s.jsx)(L.E,{screenreaderText:"Loading contents"}),fetchErrorState:e=>(0,s.jsx)(F.D,{error:e}),children:(0,s.jsx)(I.n,{severities:i.summary.vulnerabilityStatus.affected.severities})})};var O=i(46173);let V=()=>{let{pushNotification:e}=r.useContext(v.K),{isFetching:l,fetchError:i,totalItemCount:L,tableControls:D}=r.useContext(O.L),[F,I]=r.useState(null),B=null!==F,{numRenderedColumns:V,currentPageItems:M,propHelpers:{paginationProps:U,tableProps:G,getThProps:J,getTrProps:R,getTdProps:$},expansionDerivedState:{isCellExpanded:A},filterState:{filterValues:H,setFilterValues:Q}}=D,{downloadSBOM:W,downloadSBOMLicenses:Y}=(0,k.m)(),Z=()=>{I(null)},[q,z]=r.useState(null),{mutate:X,isPending:ee}=(0,S.l6)(l=>{z(null),e({title:(0,K.B7)(l),variant:"success"})},l=>{e({title:(0,K.Ut)(l),variant:"danger"})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(p.X,(0,n._)((0,t._)({},G),{"aria-label":"sbom-table",children:[(0,s.jsx)(m.d,{children:(0,s.jsx)(h.Tr,{children:(0,s.jsxs)(T.Ze,(0,n._)((0,t._)({},D),{children:[(0,s.jsx)(b.Th,(0,t._)({},J({columnKey:"name"}))),(0,s.jsx)(b.Th,(0,t._)({},J({columnKey:"version"}))),(0,s.jsx)(b.Th,(0,t._)({},J({columnKey:"supplier"}))),(0,s.jsx)(b.Th,(0,t._)({},J({columnKey:"labels"}))),(0,s.jsx)(b.Th,(0,t._)({},J({columnKey:"published"}))),(0,s.jsx)(b.Th,(0,t._)({},J({columnKey:"packages"}))),(0,s.jsx)(b.Th,(0,t._)({},J({columnKey:"vulnerabilities"})))]}))})}),(0,s.jsx)(T.nJ,{isLoading:l,isError:!!i,isNoData:0===L,numRenderedColumns:V,children:M.map((e,l)=>(0,s.jsx)(x.N,{isExpanded:A(e),children:(0,s.jsx)(h.Tr,(0,n._)((0,t._)({},R({item:e})),{children:(0,s.jsxs)(T.Oi,(0,n._)((0,t._)({},D),{item:e,rowIndex:l,children:[(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:20,modifier:"breakWord"},$({columnKey:"name",isCompoundExpandToggle:!0,item:e,rowIndex:l})),{children:(0,s.jsx)(a.k2,{to:(0,a.tW)(P.Jh.sbomDetails,{sbomId:e.id}),children:e.name})})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:10,modifier:"truncate"},$({columnKey:"version"})),{children:e.described_by.map(e=>e.version).filter(e=>e).join(", ")})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:10,modifier:"truncate"},$({columnKey:"supplier"})),{children:e.suppliers.join(", ")})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:20,modifier:"truncate"},$({columnKey:"labels"})),{children:(0,s.jsx)(f.g,{value:e.labels,onClick:e=>{let{key:l,value:i}=e,s=(0,y.m4)({key:l,value:i}),r=H.labels;if(!(null==r?void 0:r.includes(s))){let e=r?[...r,s]:[s];Q((0,n._)((0,t._)({},H),{labels:e}))}}})})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:10,modifier:"truncate"},$({columnKey:"published"})),{children:(0,w.Yq)(e.published)})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:10},$({columnKey:"packages"})),{children:e.number_of_packages})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:20},$({columnKey:"vulnerabilities"})),{children:(0,s.jsx)(N,{sbomId:e.id})})),(0,s.jsx)(_.Td,{isActionCell:!0,children:(0,s.jsx)(j.G,{items:[{title:"Edit labels",onClick:()=>{I(e)}},{isSeparator:!0},{title:"Download SBOM",onClick:()=>{W(e.id,"".concat(e.name,".json"))}},{title:"Download License Report",onClick:()=>{Y(e.id)}},{isSeparator:!0},{title:"Delete",onClick:()=>{z(e)}}]})})]}))}))},e.id))})]})),(0,s.jsx)(C.n,{idPrefix:"sbom-table",isTop:!1,paginationProps:U}),(0,s.jsxs)(o.a,{isOpen:B,variant:"medium",onClose:Z,children:[(0,s.jsx)(d.r,{title:"Edit labels"}),(0,s.jsx)(c.c,{children:F&&(0,s.jsx)(E.f,{sbom:F,onClose:Z})})]}),(0,s.jsx)(g.T,(0,n._)((0,t._)({},(0,K.zK)(q)),{inProgress:ee,titleIconVariant:"warning",isOpen:!!q,confirmBtnVariant:u.Ak.danger,confirmBtnLabel:"Delete",cancelBtnLabel:"Cancel",onCancel:()=>z(null),onClose:()=>z(null),onConfirm:()=>{q&&X(q.id)}}))]})}},75725:function(e,l,i){i.d(l,{r:()=>x});var t=i(32909),n=i(42642),s=i(62540),r=i(63696),a=i(74343),o=i(61360),d=i(35048),c=i(32490),u=i(24773),p=i(81592),m=i(93826),h=i(52362),b=i(46173);let x=e=>{let{showFilters:l,showActions:i}=e,x=(0,a.Zp)(),{tableControls:_}=r.useContext(b.L),{propHelpers:{toolbarProps:j,filterToolbarProps:y,paginationToolbarItemProps:g,paginationProps:f}}=_;return(0,s.jsx)(o.M,(0,n._)((0,t._)({},j),{"aria-label":"sbom-toolbar",children:(0,s.jsxs)(d.P,{children:[l&&(0,s.jsx)(p.Us,(0,t._)({},y)),i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.T,{children:(0,s.jsx)(u.$n,{variant:"primary",onClick:()=>x(h.Jh.sbomUpload),children:"Upload SBOM"})}),(0,s.jsx)(c.T,{children:(0,s.jsx)(u.$n,{variant:"secondary",onClick:()=>x(h.Jh.sbomScan),children:"Generate vulnerability report"})})]}),(0,s.jsx)(c.T,(0,n._)((0,t._)({},g),{children:(0,s.jsx)(m.n,{idPrefix:"sbom-table",isTop:!0,paginationProps:f})}))]})}))}}}]);